{% extends "TopnavUser.html" %} {% load static %} {% block content %}
<br><br>

<style>


#logo-farm {
    width: 400px; 
    height: 300px; 
    align-items: center; 
    padding: 1%; 
    position: absolute; 
    border-radius: 100%; 
    top:400px;
    
}
#img-farm{
    width: 100%; 
    height: 500px; 
    align-items: center; 
    padding: 1%;

   
    backface-visibility: hidden;
    opacity: 1;
    transition: .5s ease;

}
.opacity-img:hover #img-farm  {
  opacity: 0.3;
}
.opacity-img:hover .middle {
  opacity: 1;
}

.middle {
  transition: .5s ease;
  opacity: 0;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  -ms-transform: translate(-50%, -50%);
  text-align: center;
}

.text {
  background-color: #facc15;
  color: white;
  font-size: 16px;
  padding: 16px 32px;
}
form {
  width: 300px;
  margin: 0 auto;
  text-align: center;
  padding-top: 50px;
}

.value-button {
  display: inline-block;
  border: 1px solid #ddd;
  margin: 0px;
  width: 40px;
  height: 40px;
  text-align: center;
  vertical-align: middle;
  padding: 11px 0;
  margin-top: -2px;
  background: #eee;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.value-button:hover {
  cursor: pointer;
}

form #decrease {
  margin-right: -5px;
  border-radius: 8px 0 0 8px;
}

form #increase {
  margin-left: -6px;
  border-radius: 0 8px 8px 0;
}

form #input-wrap {
  margin: 0px;
  padding: 0px;
}

input#number {
  text-align: center;
  border: none;
  border-top: 1px solid #ddd;
  border-bottom: 1px solid #ddd;
  margin: 0px;
  width: 40px;
  height: 40px;
}

input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
}
</style>

<div class="container">
<div  style="background-color: white; ">

<div class="opacity-img">
<img
src="{{data_product.store_id.store_logo.url}}" id="logo-farm" class="img-farm"></img>
<img
src="{{data_product.store_id.store_img.url}}" id="img-farm"></img>
<div class="middle">
    <a class="text" href="{% url 'farm-detail' id=data_product.store_id.id %}">
       เยี่ยมชม {{data_product.store_id.store_name}}
    </a>
  </div>
</div>
<br>
<br>
<h4>รายละเอียดสินค้า {{data_product.product_name}}</h4>
<hr>
<div class="row border-indigo-600" style="margin: 2%;">
    <div class="col-lg-1"></div>
    <div class="col-lg-4">
      <br></br>
      <img
      src="{{data_product.product_image.url}}"
      style="width: 100%; height: auto; align-items: center; padding: 1%;"
      ></img>
      
    </div>
    <div class="col-lg-1"></div>
    <div class="col-lg-5 col-12">
      <br></br>
      <div class="row">
        <div class="col">
          <h3 style="color: brown;">
            {{data_product.product_name}}
          </h3>
        </div>


        {% if data_product.type_id_id == 2  %}
                {% if data_product.select_carving == 0 %}
                <div class="col">
                    <h5 style="color:#ea580c; align-items:center; border-width:4px; border-color: #ea580c; border-style: solid; padding: 1%;">
                    จอง
                    </h5>
                </div>
                {% endif %}

            {% if data_product.select_carving == 1 %}
                <div class="col">
                <h5 style="color:#166534; align-items:center; border-width:4px; border-color: #166534; border-style: solid; padding: 1%;">
                    แกะสลัก
                </h5>
                </div>
            {% endif %}

        {% endif %}



      </div>
      <div class="row">
        <div class="col">
         <br>
          <p style="color:#1f2937; text-align: left;">ขนาด :  {{data_product.product_weight}} kg</p>
          <p style="color:#1f2937; text-align: left;">เนื้อ : {{data_product.melon_color}}</p>


          {% if data_product.type_id_id == 2 and data_product.select_carving == 1 %}
          <p style="color:#1f2937; text-align: left;">
            ราคาค่าบริการแกะลาย : {{data_product.cost_carving}}
          </p>
          {% endif %}


        </div>
        <div class="col">
          <br>
          <p style="color:#1f2937; text-align: left;">
            คุณภาพ : {{data_product.quality_id.quality_name}}
          </p>
          <p style="color:#1f2937; text-align: left;">
            รอบตัด : {{data_product.date_harvest}}
          </p>
          <p style="color:#1f2937; text-align: left;">
            วันหมดอายุ : {{data_product.date_expire}}
          </p>
        </div>
      </div>
      <br>
      <div class="col">
        <p style="color:#1f2937; text-align: left;">
          รายละเอียดสินค้า : {{data_product.product_description}}
        </p>
      </div>

      <div class="col" style="background-color: #f3f4f6; padding: 5%;">
       <p>สั่ง</p>
       <div class="col-sm">
        <!-- <span id="numberstyle-decrement">–</span>
        <input id="numberstyle" type="number" min="0" max="5000" name="cost_carving" value="0" required>
        <span id="numberstyle-increment">+</span> -->
        <form class="mb-4">
          <div class="value-button pt-2" id="decrease" onclick="decreaseValue()" value="Decrease Value">-</div>
          <input type="number" id="number" value="1" min="1" max={{data_product.product_amount}} />
          <div class="value-button pt-2" id="increase" onclick="increaseValue()" value="Increase Value">+</div>
          <input type="submit">
        </form>
      </div>
      
      <p style="color:#1f2937; text-align: end;">
        จำนวนในคลัง : {{data_product.product_amount}}
      </p>
      <p style="color:#1f2937; text-align: end;">
        ราคา : {{data_product.product_price}} ฿
      </p>
      <p style="color:#1f2937; text-align: end;">
        ค่าส่ง : <span class="ship_price" data-price="{{data_product.shipping_cost}}">{{data_product.shipping_cost}}</span> ฿
      </p>
      <p style="color:#b90000; font-size: 30px; text-align: end;">
        รวม : <span class="product-total-price" data-price="{{data_product.product_price}}">{{data_product.product_price}}</span> ฿ 
      </p>
      
      </div>
    </div>
    <div class="col-lg-1"></div>

  </div>
  <br>
 
  <small class="float-end" style="padding: 1%;">สร้างเมื่อวันที่ : {{data_product.date_create}}</small>
  <br>
  <br>
</div>
</div>
<br><br> <br><br>

<script>
  function increaseValue() {
  var value = parseInt(document.getElementById('number').value, 10);
  value = isNaN(value) ? 0 : value;
  // value > 6 ? value = 6 : '';
  value++;
  document.getElementById('number').value = value;
  pricetotal();
}

function decreaseValue() {
  var value = parseInt(document.getElementById('number').value, 10);
  value = isNaN(value) ? 0 : value;
  value < 1 ? value = 1 : '';
  value--;
  document.getElementById('number').value = value;
  pricetotal();
}

function pricetotal() {
  var totalPrice = document.querySelector('.product-total-price');
  var shipprice = document.querySelector('.ship_price');
  var price = totalPrice.dataset.price;
  var quantity = document.getElementById('number').value;
  var sum = (price * quantity);
  sum = Math.round(sum * 100) / 100;
  totalPrice.innerHTML = sum;
}
// ( function() {
//   window.inputNumber = function(el) {

//     var min = el.attr('min') || false;
//     var max = el.attr('max') || false;

//     var els = {};

//     els.dec = el.prev();
//     els.inc = el.next();

//     el.each(function() {
//       init($(this));
//     });

//     function init(el) {

//       els.dec.on('click', decrement);
//       els.inc.on('click', increment);

//       function decrement() {
//         var value = el[0].value;
//         value--;
//         if(!min || value >= min) {
//           el[0].value = value;
//         }
//       }

//       function increment() {
//         var value = el[0].value;
//         value++;
//         if(!max || value <= max) {
//           el[0].value = value++;
//         }
//       }
//     }
//   }
//   })();

//   inputNumber($('#numberstyle'));

</script>







{% endblock %}